### proc

进程六态：创建态、睡眠阻塞态、就绪态。运行态和僵尸态


**上下文切换**

在进程切换前要保存当前进程的内核态执行现场，并恢复切入进程的执行现场。

由于进程都发生在内核态，二内核态的段寄存器都是相同的，因此无需保存段寄存器，而 `EAX`、`ECX`、`EDX`也不需要保存（x86约定调用者保存在调用者进程的堆栈中），`ESP`也无需保存，因为 `context`本身就是堆栈顶位置，而进程 `PCB`中 `proc->context`成员就指向 `context`，也就是堆栈对应的位置

> 例如，某进程用户态代码执行 `yield`系统调用而希望让出 `cpu`，本进程经系统调用过程而在内核堆栈中形成的 `trapframe`。然后随着内核代码的执行和函数调用嵌套，形成更多层次的函数调用栈，直到 `swtch()`为止，最后在切换前在堆栈保存现场 `context`
